<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/bootstrap.css">
    <link rel="stylesheet" href="../styles/bootstrap-override.css">
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/analysis.css">
    <title>–ê–Ω–∞–ª–∏–∑ –ø–æ—ç–∑–∏–∏ - –°–±–æ—Ä–Ω–∏–∫ —Å—Ç–∏—Ö–æ–≤</title>
    <script src="../scripts/theme.js"></script>
</head>

<body class="analysis-page">
    <!-- Page Loader -->
    <div id="page-loader">
        <div class="loader-spinner"></div>
    </div>

    <div id="header-placeholder"></div>

    <main class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold mb-3">üîç –ê–Ω–∞–ª–∏–∑ –ø–æ—ç–∑–∏–∏</h1>
            <p class="lead text-muted">–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</p>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
        <section class="mb-5">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h2 class="h3 fw-bold mb-3">üé≠ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h2>
                    <p class="text-muted mb-4">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø–æ—ç–∑–∏–∏</p>
                    
                    <div class="row g-3 mb-4" id="mood-buttons">
                        <div class="col-6 col-md-4 col-lg-2">
                            <button class="btn btn-outline-primary w-100 mood-btn" data-mood="–º–µ–ª–∞–Ω—Ö–æ–ª–∏—á–Ω–æ–µ">
                                üòî –ú–µ–ª–∞–Ω—Ö–æ–ª–∏—è
                            </button>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <button class="btn btn-outline-success w-100 mood-btn" data-mood="—Ä–∞–¥–æ—Å—Ç–Ω–æ–µ">
                                üòä –†–∞–¥–æ—Å—Ç—å
                            </button>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <button class="btn btn-outline-secondary w-100 mood-btn" data-mood="—Å–æ–∑–µ—Ä—Ü–∞—Ç–µ–ª—å–Ω–æ–µ">
                                ü§î –§–∏–ª–æ—Å–æ—Ñ–∏—è
                            </button>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <button class="btn btn-outline-secondary w-100 mood-btn" data-mood="—Ä–æ–º–∞–Ω—Ç–∏—á–Ω–æ–µ">
                                ‚ù§Ô∏è –†–æ–º–∞–Ω—Ç–∏–∫–∞
                            </button>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <button class="btn btn-outline-secondary w-100 mood-btn" data-mood="–Ω–æ—Å—Ç–∞–ª—å–≥–∏—á–Ω–æ–µ">
                                üèõÔ∏è –ù–æ—Å—Ç–∞–ª—å–≥–∏—è
                            </button>
                        </div>
                        <div class="col-6 col-md-4 col-lg-2">
                            <button class="btn btn-outline-secondary w-100 mood-btn" data-mood="—Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ">
                                üåô –ú–∏—Å—Ç–∏–∫–∞
                            </button>
                        </div>
                    </div>

                    <div id="mood-results" class="mt-4" style="display: none;">
                        <div class="alert alert-info">
                            <h5 class="alert-heading mb-2" id="mood-title"></h5>
                            <p class="mb-2" id="mood-description"></p>
                            <hr>
                            <p class="mb-0"><strong>–ù–∞–π–¥–µ–Ω–æ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–π:</strong> <span id="mood-count"></span></p>
                        </div>
                        <div id="mood-poems" class="row g-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –û–±–ª–∞–∫–æ —Ç–µ–≥–æ–≤ -->
        <section class="mb-5">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h2 class="h3 fw-bold mb-3">‚òÅÔ∏è –û–±–ª–∞–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–µ–º</h2>
                    <p class="text-muted mb-4">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–µ–≥, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è</p>
                    
                    <div id="tag-cloud" class="d-flex flex-wrap gap-2 mb-4" style="min-height: 150px;">
                        <div class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–≥–æ–≤...</div>
                    </div>

                    <div id="tag-results" style="display: none;">
                        <hr>
                        <h5 class="mb-3">–°—Ç–∏—Ö–∏ –ø–æ —Ç–µ–º–µ: <span class="text-primary" id="selected-tag"></span></h5>
                        <div id="tag-poems" class="row g-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ -->
        <section class="mb-5">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h2 class="h3 fw-bold mb-3">üìÖ –ü–æ—ç–∑–∏—è —Å–∫–≤–æ–∑—å –≤—Ä–µ–º—è</h2>
                    <p class="text-muted mb-4">–ò—Å—Å–ª–µ–¥—É–π—Ç–µ, –∫–∞–∫ –º–µ–Ω—è–ª–∞—Å—å –ø–æ—ç–∑–∏—è –≤ —Ä–∞–∑–Ω—ã–µ —ç–ø–æ—Ö–∏</p>
                    
                    <div class="row g-3 mb-4">
                        <div class="col-12">
                            <div class="timeline-container">
                                <div class="btn-group w-100" role="group" id="era-buttons">
                                    <button type="button" class="btn btn-outline-secondary era-btn" data-era="1800-1850">
                                        <span class="era-year">1800-1850</span><br><small class="era-name">–ó–æ–ª–æ—Ç–æ–π –≤–µ–∫</small>
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary era-btn" data-era="1850-1900">
                                        <span class="era-year">1850-1900</span><br><small class="era-name">–†–µ–∞–ª–∏–∑–º</small>
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary era-btn" data-era="1900-1920">
                                        <span class="era-year">1900-1920</span><br><small class="era-name">–°–µ—Ä–µ–±—Ä—è–Ω—ã–π –≤–µ–∫</small>
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary era-btn" data-era="1920-1950">
                                        <span class="era-year">1920-1950</span><br><small class="era-name">–°–æ–≤–µ—Ç—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥</small>
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary era-btn" data-era="1950-2000">
                                        <span class="era-year">1950-2000</span><br><small class="era-name">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å</small>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="era-results" style="display: none;">
                        <div class="alert alert-success">
                            <h5 class="alert-heading mb-2" id="era-title"></h5>
                            <p class="mb-0" id="era-description"></p>
                        </div>
                        <div id="era-poems" class="row g-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—ç—Ç–æ–≤ -->
        <section class="mb-5">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h2 class="h3 fw-bold mb-3">üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—ç—Ç–æ–≤</h2>
                    <p class="text-muted mb-4">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤</p>
                    
                    <div class="row g-3" id="poet-stats">
                        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã -->
        <section class="mb-5">
            <div class="card shadow-sm bg-gradient">
                <div class="card-body p-4">
                    <h2 class="h3 fw-bold mb-3">üí° –ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã?</h2>
                    <div id="facts-container" class="row g-3">
                        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../scripts/bootstrap.bundle.js"></script>
    <script src="../scripts/jquery-3.7.1.min.js"></script>
    <script src="../scripts/poems-manager.js"></script>
    <script src="../scripts/notifications.js"></script>
    <script src="../scripts/load-components.js"></script>
    <script src="../scripts/analysis.js"></script>
    
    <script>
        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∏—Ö–∞
        let poemModalInstance = null;

        function showPoemModal(poemId) {
            const poem = poemsManager.getPoemById(poemId);
            if (!poem) return;

            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
            let modal = document.getElementById('poemModal');
            if (!modal) {
                const modalHTML = `
                    <div class="modal fade" id="poemModal" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="poemModalTitle"></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <p class="text-muted" id="poemModalAuthor"></p>
                                    <div id="poemModalText" style="white-space: pre-line; line-height: 1.8;"></div>
                                    <div id="poemModalTags" class="mt-3"></div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                document.body.insertAdjacentHTML('beforeend', modalHTML);
                modal = document.getElementById('poemModal');
                poemModalInstance = new bootstrap.Modal(modal);
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
            document.getElementById('poemModalTitle').textContent = poem.title;
            document.getElementById('poemModalAuthor').textContent = `${poem.author}, ${poem.year || '–≥–æ–¥ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'}`;
            document.getElementById('poemModalText').textContent = poem.text;
            
            const tagsHtml = poem.tags ? poem.tags.map(tag => `<span class="badge bg-secondary me-1">${tag}</span>`).join('') : '';
            document.getElementById('poemModalTags').innerHTML = tagsHtml;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            poemModalInstance.show();
        }
    </script>
</body>
</html>
